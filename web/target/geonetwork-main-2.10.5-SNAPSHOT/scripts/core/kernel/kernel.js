var ker=new Object();ker.loadMan=new LoadManager();ker.includes={};ker.include=function(a){a=Env.url+"/scripts/"+a;if(ker.includes[a]){return}ker.includes[a]="ok";document.write('<script type="text/javascript" src="'+a+'"><\/script>')};ker.include("core/kernel/xml.js");ker.include("core/kernel/string.js");ker.include("core/kernel/xml-loader.js");ker.include("core/kernel/xsl-transformer.js");ker.include("core/kernel/info-service.js");ker.createRequest=function(c,d){var b="<request>\n";if(typeof d=="string"){b+="<"+c+">"+xml.escape(d)+"</"+c+">\n"}else{for(var a=0;a<d.length;a++){b+="<"+c+">"+xml.escape(d[a])+"</"+c+">\n"}}b+="</request>";return b};ker.createRequestFromObject=function(c){var a="<request>\n";for(var b in c){a+="<"+b+">"+xml.escape(c[b])+"</"+b+">\n"}a+="</request>";return a};ker.send=function(b,d,e,a){if(a!=false){a=true}var c={method:"post",postBody:d,requestHeaders:["Content-type","application/xml"],onSuccess:function(f){ker.showAjaxWait(false);if(e){if(a){e(xml.ieFix(f.responseXML.firstChild))}else{e(f.responseText)}}},on404:function(f){ker.showAjaxWait(false);alert('Error 404: service "'+f.statusText+'" was not found.')},onFailure:function(f){ker.showAjaxWait(false);if(f.status>=400&&f.status<=500){if(e){if(a){e(xml.ieFix(f.responseXML.firstChild))}else{e(f.responseText)}}}else{alert("Error "+f.status+" -- "+f.statusText)}}};ker.showAjaxWait(true);new Ajax.Request(Env.locService+"/"+b,c)};ker.loadURL=function(a,c){var b={method:"get",onSuccess:c,on404:function(d){alert('Error 404: location "'+a+'" not found.')},onFailure:function(d){alert("Error "+d.status+" -- "+d.statusText)}};new Ajax.Request(a,b)};ker.showAjaxWait=function(b){var a=$("ajax.wait");if(a==null){return}if(b){a.show()}else{a.hide()}};ker.showError=function(e,c){var f=c.getAttribute("id");var d=c.getElementsByTagName("message");var b=c.getElementsByTagName("object");var a=c.getElementsByTagName("class");var g=e+"\n";if(f){g+="Error : "+f+"\n"}if(d.length!=0){g+="Message : "+xml.textContent(d[0])+"\n"}if(a.length!=0){g+="Class : "+xml.textContent(a[0])+"\n"}if(b.length!=0){g+="Object : "+xml.textContent(b[0])+"\n"}alert(g)};ker.wrap=function(a,b){return function(){return b.apply(a,arguments)}};ker.dump=function(c,g){if(g==null){g=""}else{g="("+g+")"}var f="ker.dump "+g+"\n\n";if(c==null){alert(f+"Object is null");return}try{if(typeof c=="string"){alert(f+"Object is a string:\n\n"+c)}else{if(typeof c=="boolean"){alert(f+"Object is a boolean:\n\n"+c)}else{if(c.nodeType){alert(f+"Object is XML:\n\n"+xml.toString(c))}else{var a=typeof c;var d=f+"Object is generic (type is "+a+"):\n\n"+Sarissa.xmlize(c,"object");alert(d)}}}}catch(b){alert(f+"Raised error : "+b)}};ker.wait=function(c){var b=new Date();var a=null;do{a=new Date()}while(a-b<c)};function LoadManager(){var b=0;var a=null;this.acquire=function(){b++};this.release=function(){b--};this.wait=function(d){a=d;setTimeout(c,10)};function c(){if(b!=0){setTimeout(c,100)}else{a.init()}}};