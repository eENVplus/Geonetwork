Ext.namespace("GeoExt.tree");GeoExt.tree.LayerParamLoader=function(a){Ext.apply(this,a);this.addEvents("beforeload","load");GeoExt.tree.LayerLoader.superclass.constructor.call(this)};Ext.extend(GeoExt.tree.LayerParamLoader,Ext.util.Observable,{param:null,delimiter:",",load:function(b,d){if(this.fireEvent("beforeload",this,b)){while(b.firstChild){b.removeChild(b.firstChild)}var c=(b.layer instanceof OpenLayers.Layer.HTTPRequest)&&b.layer.params[this.param];if(c){var a=(c instanceof Array)?c:c.split(this.delimiter);Ext.each(a,function(e){this.addParamNode(e,b)},this)}if(typeof d=="function"){d()}this.fireEvent("load",this,b)}},addParamNode:function(a,c){var d=this.createNode({layer:c.layer,param:this.param,item:a,delimiter:this.delimiter});var b=c.item(0);if(b){c.insertBefore(d,b)}else{c.appendChild(d)}},createNode:function(attr){if(this.baseAttrs){Ext.apply(attr,this.baseAttrs)}if(typeof attr.uiProvider=="string"){attr.uiProvider=this.uiProviders[attr.uiProvider]||eval(attr.uiProvider)}attr.nodeType=attr.nodeType||"gx_layerparam";return new Ext.tree.TreePanel.nodeTypes[attr.nodeType](attr)}});