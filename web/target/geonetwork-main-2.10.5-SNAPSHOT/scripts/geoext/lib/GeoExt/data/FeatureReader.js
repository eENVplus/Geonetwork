Ext.namespace("GeoExt","GeoExt.data");GeoExt.data.FeatureReader=function(a,b){a=a||{};if(!(b instanceof Function)){b=GeoExt.data.FeatureRecord.create(b||a.fields||{})}GeoExt.data.FeatureReader.superclass.constructor.call(this,a,b)};Ext.extend(GeoExt.data.FeatureReader,Ext.data.DataReader,{totalRecords:null,read:function(a){return this.readRecords(a.features)},readRecords:function(b){var c=[];if(b){var f=this.recordType,l=f.prototype.fields;var k,g,h,d,q,p,n,o;for(k=0,g=b.length;k<g;k++){q=b[k];p={};if(q.attributes){for(h=0,d=l.length;h<d;h++){n=l.items[h];if(/[\[\.]/.test(n.mapping)){try{o=new Function("obj","return obj."+n.mapping)(q.attributes)}catch(m){o=n.defaultValue}}else{o=q.attributes[n.mapping||n.name]||n.defaultValue}if(n.convert){o=n.convert(o)}p[n.name]=o}}p.feature=q;p.state=q.state;p.fid=q.fid;var a=(q.state===OpenLayers.State.INSERT)?undefined:q.id;c[c.length]=new f(p,a)}}return{records:c,totalRecords:this.totalRecords!=null?this.totalRecords:c.length}}});