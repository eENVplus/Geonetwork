Ext.namespace("GeoNetwork","GeoNetwork.wms");GeoNetwork.wms.LayerStylesPanel=function(a){Ext.apply(this,a);GeoNetwork.wms.LayerStylesPanel.superclass.constructor.call(this)};Ext.extend(GeoNetwork.wms.LayerStylesPanel,Ext.Panel,{previewPanel:null,map:null,layer:null,selectedStyle:null,initComponent:function(){GeoNetwork.wms.LayerStylesPanel.superclass.initComponent.call(this);this.layout="border";this.border=false;this.previewPanel=new GeoNetwork.wms.PreviewPanel({map:this.map,title:OpenLayers.i18n("layerStylesPreviewTitle")});this.store=new Ext.data.SimpleStore({reader:new Ext.data.ArrayReader({},[{name:"name",type:"string"},{name:"title",type:"string"},{name:"legendUrl",type:"string"}]),fields:["name","title","legendUrl"]});this.gridPanel=new Ext.grid.GridPanel({title:"",border:false,autoScroll:true,store:this.store,hideHeaders:false,columns:[{header:"Style",width:120,dataIndex:"name",sortable:false},{id:"description",header:"Description",width:180,dataIndex:"title",sortable:false}],autoExpandColumn:"description"});this.gridPanel.on("rowclick",this._selectStyle,this);var a={region:"center",layout:"fit",items:[this.gridPanel],split:true,width:300,minWidth:300};var b={region:"east",items:[this.previewPanel],split:true,plain:true,cls:"popup-variant1",width:250,maxSize:250,minSize:250};this.add(a);this.add(b);this.doLayout()},showLayerStyles:function(c){var e=[];for(var b=0;b<c.styles.length;b++){var a="";if(c.styles[b].legend){a=c.styles[b].legend.href}var d=[c.styles[b].name,c.styles[b].title,a];e.push(d)}this.gridPanel.getStore().loadData(e)},_selectStyle:function(b,g,c){var d=b.store.getAt(g);this.selectedStyle=d.get("name");b.getView().focusEl.focus();var a=d.get("legendUrl");if(a==""){return}a=unescape(a);this.selectedStyleLegendUrl=a;var f=d.get("legendUrl")+"&style="+this.selectedStyle;this.previewPanel.showPreviewLegend(unescape(f))}});Ext.reg("gn_layerstylespanel",GeoNetwork.wms.LayerStylesPanel);