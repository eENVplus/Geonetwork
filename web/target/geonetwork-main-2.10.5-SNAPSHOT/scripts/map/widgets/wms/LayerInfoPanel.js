Ext.namespace("GeoNetwork","GeoNetwork.wms");GeoNetwork.wms.LayerInfoPanel=function(a){Ext.apply(this,a);GeoNetwork.wms.LayerInfoPanel.superclass.constructor.call(this)};Ext.extend(GeoNetwork.wms.LayerInfoPanel,Ext.Panel,{previewPanel:null,map:null,previewCenterPoint:null,onlineresource:null,layer:null,initComponent:function(){GeoNetwork.wms.LayerInfoPanel.superclass.initComponent.call(this);this.layout="border";this.border=false;this.previewPanel=new GeoNetwork.wms.PreviewPanel({map:this.map,previewCenterPoint:this.previewCenterPoint});this.store=new Ext.data.SimpleStore({reader:new Ext.data.ArrayReader({},[{name:"title",type:"string"},{name:"field",type:"string"}]),fields:["title","field"]});this.gridPanel=new Ext.grid.GridPanel({title:"",store:this.store,autoScroll:true,hideHeaders:false,columns:[]});this.layerInfo=new GeoNetwork.wms.WMSLayerInfo({callback:this._showLayerInfo,scope:this});var a={region:"center",layout:"fit",items:[this.gridPanel],split:true,width:300,minWidth:300};var b={region:"east",items:[this.previewPanel],split:true,plain:true,cls:"popup-variant1",width:250,maxSize:250,minSize:250};this.add(a);this.add(b);this.doLayout()},showLayerInfo:function(){this.previewPanel.showPreview(this.layer);this.layerInfo.loadWMS(this.onlineresource,this.layer)},_showLayerInfo:function(a){if(!a){Ext.MessageBox.alert(OpenLayers.i18n("errorTitle"),OpenLayers.i18n("WMSBrowserConnectError"));this.body.dom.style.cursor="default"}else{var b=[[OpenLayers.i18n("layerInfoPanel.titleField"),a.title||a.name],[OpenLayers.i18n("layerInfoPanel.descriptionField"),a.description],[OpenLayers.i18n("layerInfoPanel.queryableField"),a.queryable]];this.gridPanel.reconfigure(this.store,new Ext.grid.ColumnModel([{header:"Field",dataIndex:"title",sortable:true},{id:"value",header:"Value",dataIndex:"field",sortable:true}]));this.gridPanel.autoExpandColumn="value";this.gridPanel.getStore().loadData(b)}this.body.dom.style.cursor="default"}});Ext.reg("gn_infolayerpanel",GeoNetwork.wms.LayerInfoPanel);