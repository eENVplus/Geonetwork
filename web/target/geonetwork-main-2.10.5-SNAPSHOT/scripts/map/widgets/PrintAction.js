Ext.namespace("Geonetwork","Geonetwork.print");Geonetwork.print.PrintAction=function(a){var b=OpenLayers.Util.extend({iconCls:"mf-print-action",text:OpenLayers.Lang.translate("mf.print.print"),tooltip:OpenLayers.Lang.translate("mf.print.print-tooltip"),handler:this.handler,scope:this},a);Geonetwork.print.PrintAction.superclass.constructor.call(this,b);OpenLayers.Util.extend(this,a);this.mask=new Ext.LoadMask(this.map.div,{msg:OpenLayers.Lang.translate("mf.print.loadingConfig")});this.initPrint()};Ext.extend(Geonetwork.print.PrintAction,Ext.Action,{handler:function(){if(!this.printing){this.mask=null;this.mask=new Ext.LoadMask(this.map.div,{msg:OpenLayers.Lang.translate("mf.print.loadingConfig")});this.print()}},fillSpec:function(a){var b={bbox:this.map.getExtent().toArray()};var c=a.spec;c.pages.push(b);c.layout=this.getCurLayout()},getCurDpi:function(){return this.config.dpis[0].value},getCurLayout:function(){return this.config.layouts[0].name}});OpenLayers.Util.applyDefaults(Geonetwork.print.PrintAction.prototype,mapfish.widgets.print.Base);Ext.reg("gn_printaction",Geonetwork.print.PrintAction);