Ext.namespace("GeoNetwork","GeoNetwork.OGCUtil");GeoNetwork.OGCUtil.getProtocolVersion=function(){return"1.3.0"};GeoNetwork.OGCUtil.getLanguage=function(){return Env.lang};GeoNetwork.OGCUtil.ensureProperUrlEnd=function(a){if(a.indexOf("?")==-1){a+="?"}else{var b=a.substring(a.length-1);if(b!="&"&&b!="?"){a+="&"}}return a};GeoNetwork.OGCUtil.reprojectMap=function(b,c,f){if(b.projection!=c.projCode){b.baseLayer.options.scales=b.scales;var k=b.getProjectionObject();b.projection=c.projCode;if(c.getUnits()===null){b.units="degrees"}else{b.units=c.getUnits()}var e=null;if(b.getControlsByClass("GeoNetwork.Control.CursorPos").length>0){e=b.getControlsByClass("GeoNetwork.Control.CursorPos")[0]}if(b.units=="m"&&e!==null){e.numdigits=0}else{if(b.units=="degrees"&&e!==null){e.numdigits=4}}b.maxExtent=b.maxExtent.transform(k,c);b.baseLayer.extent=b.maxExtent;var a=b.getExtent().transform(k,c);for(var g=0;g<b.layers.length;g++){var h=b.layers[g];h.units=b.units;h.projection=c;h.maxExtent=b.maxExtent;if(h.isBaseLayer){h.initResolutions()}else{h.resolutions=b.baseLayer.resolutions;h.minResolution=b.baseLayer.minResolution;h.maxResolution=b.baseLayer.maxResolution}if(h instanceof OpenLayers.Layer.Vector){for(var d=0;d<h.features.length;d++){var l=h.features[d];if(l.geometry.projection!=b.projection){l.geometry.transform(new OpenLayers.Projection(l.geometry.projection),b.getProjectionObject());l.geometry.projection=b.projection}}}}if(!f){b.zoomToExtent(a)}}};GeoNetwork.OGCUtil.layerExistsInMap=function(d,j){var f=false;for(var c=0,a=j.layers.length;c<a;c++){if(j.layers){var b=j.layers[c];if(b.params){try{var h=b.params.LAYERS.split(",");if(((h.indexOf(d.params.LAYERS)!=-1)||(b.params.LAYERS==d.params.LAYERS))&&b.params.SERVICE==d.params.SERVICE&&b.url==d.url){f=b;break}}catch(g){}}}}return f};