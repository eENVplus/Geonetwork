function View(j){var i=new XSLTransformer("ownership/client-group-row.xsl",j);var h=j;var a=null;this.addSourceUser=e;this.clearGroupList=f;this.addGroupRows=g;function e(l,k){gui.addToSelect("source.user",l,k)}function f(){gui.removeAllButFirst("group.list");Element.hide("groups")}function g(k){a=k;var q=xml.children(k,"group");for(var l=0;l<q.length;l++){var r=xml.evalXPath(q[l],"id");var n=i.transform(q[l]);gui.appendTableRow("group.list",n);var p=$(r);var o=xml.getElementById(p,"target.group");var m=xml.getElementById(p,"target.user");Event.observe(o,"change",ker.wrap(this,c));d(r,o);b(r,m);o.targetUsr=m}Element.show("groups")}function d(m,p){var o=xml.children(a,"targetGroup");for(var l=0;l<o.length;l++){var n=xml.evalXPath(o[l],"id");var k=xml.evalXPath(o[l],"label/"+Env.lang);gui.addToSelect(p,n,k,m==n)}}function b(n,l){var k=$F("source.user");$(l).options.length=0;var r=xml.children(a,"targetGroup");for(var q=0;q<r.length;q++){var u=xml.evalXPath(r[q],"id");if(u==n){var t=xml.children(r[q],"editor");for(var o=0;o<t.length;o++){var s=xml.evalXPath(t[o],"id");var m=xml.evalXPath(t[o],"name");var v=xml.evalXPath(t[o],"surname");var p=xml.evalXPath(t[o],"username");if(s!=k){gui.addToSelect(l,s,v+" "+m+" ("+p+") ")}}}}}function c(l){var k=Event.element(l);var m=$F(k);b(m,k.targetUsr)}};