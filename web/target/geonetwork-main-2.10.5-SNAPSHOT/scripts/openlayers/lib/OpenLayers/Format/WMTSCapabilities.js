OpenLayers.Format.WMTSCapabilities=OpenLayers.Class(OpenLayers.Format.XML,{defaultVersion:"1.0.0",version:null,parser:null,yx:{"urn:ogc:def:crs:EPSG::4326":true},initialize:function(a){OpenLayers.Format.XML.prototype.initialize.apply(this,[a]);this.options=a},read:function(d){if(typeof d=="string"){d=OpenLayers.Format.XML.prototype.read.apply(this,[d])}var b=d.documentElement;var a=this.version||b.getAttribute("version")||this.defaultVersion;if(!this.parser||this.parser.version!==a){var c=OpenLayers.Format.WMTSCapabilities["v"+a.replace(/\./g,"_")];if(!c){throw new Error("Can't find a WMTS capabilities parser for version "+a)}this.parser=new c(this.options)}return this.parser.read(d)},createLayer:function(e,f){var k;var l={layer:true,matrixSet:true};for(var c in l){if(!(c in f)){throw new Error("Missing property '"+c+"' in layer configuration.")}}var g=e.contents;var d=g.tileMatrixSets[f.matrixSet];var j=g.layers;var b;for(var h=0,m=g.layers.length;h<m;++h){if(g.layers[h].identifier===f.layer){b=g.layers[h];break}}if(b&&d){var a;for(var h=0,m=b.styles.length;h<m;++h){a=b.styles[h];if(a.isDefault){break}}k=new OpenLayers.Layer.WMTS(OpenLayers.Util.applyDefaults(f,{url:e.operationsMetadata.GetTile.dcp.http.get,name:b.title,style:a,matrixIds:d.matrixIds}))}return k},CLASS_NAME:"OpenLayers.Format.WMTSCapabilities"});