wd.View=function(m){HarvesterView.call(this);var c=new XSLTransformer("harvesting/webdav/client-privil-row.xsl",m);var n=new XSLTransformer("harvesting/webdav/client-result-tip.xsl",m);var h=m;var b=new Validator(h);var a=null;this.setPrefix("wd");this.setPrivilTransf(c);this.setResultTransf(n);this.init=j;this.setEmpty=l;this.setData=i;this.getData=e;this.isDataValid=d;this.clearIcons=f;this.addIcon=g;Event.observe("wd.icon","change",ker.wrap(this,k));function j(){b.add([{id:"wd.name",type:"length",minSize:1,maxSize:200},{id:"wd.url",type:"length",minSize:1,maxSize:200},{id:"wd.url",type:"url"},{id:"wd.subtype",type:"length",minSize:1,maxSize:200},{id:"wd.username",type:"length",minSize:0,maxSize:200},{id:"wd.password",type:"length",minSize:0,maxSize:200}]);a=new Shower("wd.useAccount","wd.account")}function l(){this.setEmptyCommon();$("wd.url").value="";$("wd.recurse").checked=false;$("wd.validate").checked=false;var p=$("wd.icon").options;for(var o=0;o<p.length;o++){if(p[o].value=="default.gif"){p[o].selected=true;break}}a.update();k()}function i(q){this.setDataCommon(q);var p=q.getElementsByTagName("site")[0];var o=q.getElementsByTagName("options")[0];hvutil.setOption(p,"url","wd.url");hvutil.setOption(p,"icon","wd.icon");hvutil.setOption(o,"validate","wd.validate");hvutil.setOption(o,"recurse","wd.recurse");hvutil.setOption(o,"subtype","wd.subtype");this.removeAllGroupRows();this.addGroupRows(q);this.unselectCategories();this.selectCategories(q);a.update();k()}function e(){var o=this.getDataCommon();o.URL=$F("wd.url");o.ICON=$F("wd.icon");o.VALIDATE=$("wd.validate").checked;o.RECURSE=$("wd.recurse").checked;o.SUBTYPE=$F("wd.subtype");o.PRIVILEGES=this.getPrivileges();o.CATEGORIES=this.getSelectedCategories();return o}function d(){if(!b.validate()){return false}return this.isDataValidCommon()}function f(){$("wd.icon").options.length=0}function g(o){gui.addToSelect("wd.icon",o,o)}function k(){var o=$F("wd.icon");var p=$("wd.icon.image");p.setAttribute("src",Env.url+"/images/harvesting/"+o)}};