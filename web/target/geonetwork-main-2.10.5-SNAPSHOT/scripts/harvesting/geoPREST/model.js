geoPREST.Model=function(m){HarvesterModel.call(this);var j=m;var e=null;var f=null;this.retrieveImportXslts=g;this.retrieveGroups=h;this.retrieveCategories=l;this.retrieveIcons=c;this.getUpdateRequest=d;function h(n){new InfoService(j,"groupsIncludingSystemGroups",n)}function l(n){new InfoService(j,"categories",n)}function c(o){e=o;var n=ker.createRequest("type","icons");ker.send("xml.harvesting.info",n,ker.wrap(this,i))}function i(n){if(n.nodeName=="error"){ker.showError(j.getText("cannotRetrieve"),n)}else{var q=[];var p=xml.children(xml.children(n)[0]);for(var o=0;o<p.length;o++){q.push(xml.textContent(p[o]))}e(q)}}function g(o){f=o;var n=ker.createRequest("type","importStylesheets");ker.send("xml.harvesting.info",n,ker.wrap(this,b))}function b(n){if(n.nodeName=="error"){ker.showError(j.getText("cannotRetrieve"),n)}else{var q=[];var p=xml.children(xml.children(n)[0]);for(var o=0;o<p.length;o++){q.push(xml.toObject(p[o]))}f(q)}}function d(q){var o=str.substitute(a,q);var p=q.SEARCH_LIST;var r="";for(var n=0;n<p.length;n++){r+=str.substitute(k,p[n])}o=str.replace(o,"{SEARCH_LIST}",r);return this.substituteCommon(q,o)}var a=' <node id="{ID}" type="{TYPE}">    <ownerGroup><id>{OWNERGROUP}</id></ownerGroup>    <site>      <name>{NAME}</name>      <baseUrl>{BASE_URL}</baseUrl>      <icon>{ICON}</icon>      <account>        <use>{USE_ACCOUNT}</use>        <username>{USERNAME}</username>        <password>{PASSWORD}</password>      </account>    </site>    <options>      <oneRunOnly>{ONE_RUN_ONLY}</oneRunOnly>      <every>{EVERY}</every>    </options>    <content>      <validate>{VALIDATE}</validate>      <importxslt>{IMPORTXSLT}</importxslt>    </content>    <searches>       {SEARCH_LIST}    </searches>    <privileges>       {PRIVIL_LIST}    </privileges>    <categories>       {CATEG_LIST}    </categories>  </node>';var k="    <search>      <freeText>{ANY_TEXT}</freeText>    </search>"};