Z3950Config.View=function(p){HarvesterView.call(this);var h=new XSLTransformer("harvesting/z3950Config/client-search-row.xsl",p);var q=new XSLTransformer("harvesting/z3950Config/client-result-tip.xsl",p);var k=p;var d=new Validator(k);var b=null;var c=0;this.setPrefix("z3950Config");this.setResultTransf(q);this.init=n;this.setEmpty=o;this.setData=m;this.getData=i;this.isDataValid=g;this.addEmptySearch=j;this.addSearch=f;this.removeSearch=a;this.removeAllSearch=e;this.getHostData=l;function n(){d.add([{id:"z3950Config.name",type:"length",minSize:1,maxSize:200},{id:"z3950Config.host",type:"length",minSize:1,maxSize:200},{id:"z3950Config.host",type:"hostname"},{id:"z3950Config.port",type:"integer",minValue:80,maxValue:65535,empty:true},{id:"z3950Config.username",type:"length",minSize:0,maxSize:200},{id:"z3950Config.password",type:"length",minSize:0,maxSize:200}]);gui.setupTooltips(k.getNode("tips"))}function o(){this.setEmptyCommon();$("z3950Config.clearConfig").checked=false;e();$("z3950Config.host").value="";$("z3950Config.port").value=""}function m(v){this.setDataCommon(v);var s=v.getElementsByTagName("site")[0];var u=v.getElementsByTagName("searches")[0];var r=v.getElementsByTagName("options")[0];hvutil.setOption(s,"host","z3950Config.host");hvutil.setOption(s,"port","z3950Config.port");hvutil.setOption(r,"clearConfig","z3950Config.clearConfig");var w=u.getElementsByTagName("search");e();for(var t=0;t<w.length;t++){f(w[t])}}function i(){var v=this.getDataCommon();v.CLEARCONFIG=$("z3950Config.clearConfig").checked;v.HOST=$F("z3950Config.host");v.PORT=$F("z3950Config.port");var u=[];var t=xml.children($("z3950Config.searches"));for(var r=0;r<t.length;r++){var w=t[r];var s=xml.getElementById(w,"z3950Config.source");u.push({TEXT:xml.getElementById(w,"z3950Config.text").value,TITLE:xml.getElementById(w,"z3950Config.title").value,ABSTRACT:xml.getElementById(w,"z3950Config.abstract").value,KEYWORDS:xml.getElementById(w,"z3950Config.keywords").value,CATEGORY:xml.getElementById(w,"z3950Config.category").value})}v.SEARCH_LIST=u;return v}function g(){if(!d.validate()){return false}return this.isDataValidCommon()}function j(){var s=Sarissa.getDomDocument();var r=s.createElement("search");s.appendChild(r);f(r)}function f(s){var t=""+c++;s.setAttribute("id",t);var r=h.transformToText(s);new Insertion.Bottom("z3950Config.searches",r);d.add([{id:"z3950Config.text",type:"length",minSize:0,maxSize:200},{id:"z3950Config.title",type:"length",minSize:0,maxSize:200},{id:"z3950Config.abstract",type:"length",minSize:0,maxSize:200},{id:"z3950Config.keywords",type:"length",minSize:0,maxSize:200},{id:"z3950Config.category",type:"length",minSize:0,maxSize:200}],t)}function a(r){d.removeByParent(r);Element.remove(r)}function e(){$("z3950Config.searches").innerHTML="";d.removeByParent()}function l(){var r={HOST:$F("z3950Config.host"),PORT:$F("z3950Config.port"),USERNAME:$F("z3950Config.username"),PASSWORD:$F("z3950Config.password"),USE_ACCOUNT:$("z3950Config.useAccount").checked};return r}};