ogcwxs.View=function(c){HarvesterView.call(this);var b=new XSLTransformer("harvesting/ogcwxs/client-privil-row.xsl",c);var l=new XSLTransformer("harvesting/ogcwxs/client-result-tip.xsl",c);var i=c;var n=new Validator(i);var o=null;var u=0;var j="";this.setPrefix("ogcwxs");this.setPrivilTransf(b);this.setResultTransf(l);this.init=r;this.setEmpty=t;this.setData=g;this.getData=k;this.getType=p;this.isDataValid=e;this.clearIcons=h;this.addIcon=q;this.clearOutputSchemas=s;this.addOutputSchema=a;this.reapplySelectedSchema=f;Event.observe("ogcwxs.icon","change",ker.wrap(this,d));Event.observe("ogcwxs.ogctype","change",ker.wrap(this,m));function r(){n.add([{id:"ogcwxs.name",type:"length",minSize:1,maxSize:200},{id:"ogcwxs.capabUrl",type:"length",minSize:1,maxSize:200},{id:"ogcwxs.capabUrl",type:"url"},{id:"ogcwxs.username",type:"length",minSize:0,maxSize:200},{id:"ogcwxs.password",type:"length",minSize:0,maxSize:200}]);o=new Shower("ogcwxs.useAccount","ogcwxs.account")}function t(){this.setEmptyCommon();$("ogcwxs.useLayer").checked=false;$("ogcwxs.useLayerMd").checked=false;$("ogcwxs.createThumbnails").checked=false;$("ogcwxs.ogctype").value="WMS111";$("ogcwxs.lang").value="eng";$("ogcwxs.topic").value="";$("ogcwxs.capabUrl").value="";var w=$("ogcwxs.icon").options;for(var v=0;v<w.length;v++){if(w[v].value=="default.gif"){w[v].selected=true;break}}o.update();d();j=null;this.controller.retrieveOutputSchemas()}function g(x){this.setDataCommon(x);var w=x.getElementsByTagName("site")[0];var v=x.getElementsByTagName("options")[0];hvutil.setOption(w,"url","ogcwxs.capabUrl");hvutil.setOption(w,"ogctype","ogcwxs.ogctype");hvutil.setOption(w,"icon","ogcwxs.icon");hvutil.setOption(v,"topic","ogcwxs.topic");hvutil.setOption(v,"createThumbnails","ogcwxs.createThumbnails");hvutil.setOption(v,"useLayer","ogcwxs.useLayer");hvutil.setOption(v,"useLayerMd","ogcwxs.useLayerMd");hvutil.setOption(v,"lang","ogcwxs.lang");hvutil.setOption(v,"datasetCategory","ogcwxs.datasetCategory");this.removeAllGroupRows();this.addGroupRows(x);this.unselectCategories();this.selectCategories(x);o.update();d();j=hvutil.find(v,"outputSchema");this.controller.retrieveOutputSchemas()}function f(){if(j!=null){$("ogcwxs.outputSchema").value=j}}function k(){var v=this.getDataCommon();v.CAPAB_URL=$F("ogcwxs.capabUrl");v.ICON=$F("ogcwxs.icon");v.OGCTYPE=$F("ogcwxs.ogctype");v.LANG=$F("ogcwxs.lang");v.TOPIC=$F("ogcwxs.topic");v.DATASETCATEGORY=($F("ogcwxs.datasetCategory")==null?"":$F("ogcwxs.datasetCategory"));v.OUTPUTSCHEMA=$F("ogcwxs.outputSchema");v.CREATETHUMBNAILS=$("ogcwxs.createThumbnails").checked;v.USELAYER=$("ogcwxs.useLayer").checked;v.USELAYERMD=$("ogcwxs.useLayerMd").checked;v.PRIVILEGES=this.getPrivileges();v.CATEGORIES=this.getSelectedCategories();return v}function p(){return $F("ogcwxs.ogctype")}function e(){if(!n.validate()){return false}return this.isDataValidCommon()}function h(){$("ogcwxs.icon").options.length=0}function q(v){gui.addToSelect("ogcwxs.icon",v,v)}function d(){var v=$F("ogcwxs.icon");var w=$("ogcwxs.icon.image");w.setAttribute("src",Env.url+"/images/harvesting/"+v)}function s(){$("ogcwxs.outputSchema").options.length=0}function a(w,v){gui.addToSelect("ogcwxs.outputSchema",w,v)}function m(){j=$F("ogcwxs.outputSchema");if(this.controller){this.controller.retrieveOutputSchemas()}}};