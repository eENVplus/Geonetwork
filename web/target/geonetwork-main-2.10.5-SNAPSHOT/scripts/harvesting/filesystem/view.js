filesystem.View=function(l){HarvesterView.call(this);var b=new XSLTransformer("harvesting/filesystem/client-privil-row.xsl",l);var m=new XSLTransformer("harvesting/filesystem/client-result-tip.xsl",l);var g=l;var a=new Validator(g);this.setPrefix("filesystem");this.setPrivilTransf(b);this.setResultTransf(m);this.init=h;this.setEmpty=k;this.setData=i;this.getData=d;this.isDataValid=c;this.clearIcons=e;this.addIcon=f;this.removeAllGroupRows=function(){};this.unselectCategories=function(){};Event.observe("filesystem.icon","change",ker.wrap(this,j));function h(){a.add([{id:"filesystem.name",type:"length",minSize:1,maxSize:200},{id:"filesystem.directoryname",type:"length",minSize:1,maxSize:500},{id:"filesystem.recurse",type:"length",minSize:1,maxSize:10},{id:"filesystem.nodelete",type:"length",minSize:1,maxSize:10}])}function k(){this.setEmptyCommon();var o=$("filesystem.icon").options;for(var n=0;n<o.length;n++){if(o[n].value=="default.gif"){o[n].selected=true;break}}j()}function i(r){this.setDataCommon(r);var o=r.getElementsByTagName("name")[0];var n=r.getElementsByTagName("directory")[0];var q=r.getElementsByTagName("recurse")[0];var p=r.getElementsByTagName("nodelete")[0];hvutil.setOption(r,"directory","filesystem.directoryname");hvutil.setOption(r,"recurse","filesystem.recurse");hvutil.setOption(r,"nodelete","filesystem.nodelete");hvutil.setOption(r,"icon","filesystem.icon");this.removeAllGroupRows();this.addGroupRows(r);this.unselectCategories();this.selectCategories(r);j()}function d(){var n=this.getDataCommon();n.DIRECTORYNAME=$F("filesystem.directoryname");n.RECURSE=$F("filesystem.recurse");n.NODELETE=$F("filesystem.nodelete");n.ICON=$F("filesystem.icon");n.PRIVILEGES=this.getPrivileges();n.CATEGORIES=this.getSelectedCategories();return n}function c(){if(!a.validate()){return false}return this.isDataValidCommon()}function e(){$("filesystem.icon").options.length=0}function f(n){gui.addToSelect("filesystem.icon",n,n)}function j(){var n=$F("filesystem.icon");var o=$("filesystem.icon.image");o.setAttribute("src",Env.url+"/images/harvesting/"+n)}};