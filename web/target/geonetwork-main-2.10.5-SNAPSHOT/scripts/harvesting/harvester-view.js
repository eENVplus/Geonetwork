function HarvesterView(){var c="???";var d=null;var a=null;this.setPrefix=function(e){c=e};this.setPrivilTransf=function(e){d=e};this.setResultTransf=function(e){a=e};this.getResultTip=function(e){return a.transformToText(e)};this.setEmptyCommon=function(){$(c+".name").value="";if($(c+".useAccount")){$(c+".useAccount").checked=true;$(c+".username").value="";$(c+".password").value=""}$(c+".oneRunOnly").checked=false;new Cron().setUI(c);$(c+".validate").checked=false;this.unselectImportXslt();this.removeAllGroupRows();this.unselectCategories()};this.setDataCommon=function(i){var g=i.getElementsByTagName("site")[0];var f=i.getElementsByTagName("options")[0];var h=i.getElementsByTagName("content")[0];hvutil.setOption(g,"name",c+".name");hvutil.setOptionIfExists(g,"use",c+".useAccount");hvutil.setOptionIfExists(g,"username",c+".username");hvutil.setOptionIfExists(g,"password",c+".password");hvutil.setOption(f,"oneRunOnly",c+".oneRunOnly");var k=new Cron(hvutil.find(f,"every"));$(c+".atHour").value=k.hours;$(c+".atMin").value=k.mins;$(c+".atIntervalHours").value=k.intervalHours;var j;for(day in k.days){j=$(c+"."+(day.toUpperCase()));if(k.days[day]){j.checked=true}else{j.checked=false}}hvutil.setOption(h,"validate",c+".validate");hvutil.setOption(h,"importxslt",c+".importxslt");var e=i.getElementsByTagName("ownerGroup")[0];hvutil.setOption(e,"id",c+".ownerGroup")};this.getDataCommon=function(){var f=new Cron().readUI(c);var e;if($(c+".useAccount")){e={NAME:$F(c+".name"),OWNERGROUP:$F(c+".ownerGroup"),USE_ACCOUNT:$(c+".useAccount").checked,USERNAME:$F(c+".username"),PASSWORD:$F(c+".password"),EVERY:f.asString(),AT_HOUR:f.hours,AT_MIN:f.mins,AT_INTERVAL_HOUR:f.intervalHours,ONE_RUN_ONLY:$(c+".oneRunOnly").checked,IMPORTXSLT:$F(c+".importxslt"),VALIDATE:$(c+".validate").checked}}else{e={NAME:$F(c+".name"),EVERY:f.asString(),AT_HOUR:f.hours,AT_MIN:f.mins,AT_INTERVAL_HOUR:f.intervalHours,ONE_RUN_ONLY:$(c+".oneRunOnly").checked,IMPORTXSLT:$F(c+".importxslt"),VALIDATE:$(c+".validate").checked}}return e};this.isDataValidCommon=function(){return true};this.clearGroups=function(){if($(c+".groups")){$(c+".groups").options.length=0}};this.addGroup=function(f,e){if($(c+".groups")){gui.addToSelect(c+".groups",f,e)}if(f!="-1"&&f!="0"&&f!="1"){gui.addToSelect(c+".ownerGroup",f,e)}};this.getSelectedGroups=function(){var g=$(c+".groups");var e=[];for(var f=0;f<g.options.length;f++){if(g.options[f].selected){e.push(g.options[f])}}return e};this.addEmptyGroupRows=function(e){for(var g=0;g<e.length;g++){var h=e[g];var k=Sarissa.getDomDocument();var j=k.createElement("group");var f=h.value;j.setAttribute("id",f);this.addGroupRow(j)}};this.addGroupRow=function(l){var m=l.getAttribute("id");var f="???";var k=$(c+".groups");var j=$(c+".privileges").getElementsByTagName("TR");for(var g=1;g<j.length;g++){var e=j[g].getAttribute("id").split(".")[2];if(m==e){return}}for(var g=0;g<k.options.length;g++){if(k.options[g].value==m){f=xml.textContent(k.options[g]);break}}l.setAttribute("name",f);var h=d.transform(l);gui.appendTableRow(c+".privileges",h)};this.removeGroupRow=function(e){Element.remove(e)};this.removeAllGroupRows=function(){gui.removeAllButFirst(c+".privileges")};this.addGroupRows=function(f){var h=f.getElementsByTagName("privileges");if(h.length==0){return}var g=h[0].getElementsByTagName("group");for(var e=0;e<g.length;e++){this.addGroupRow(g[e])}};this.getPrivileges=function(){var n=[];var m=$(c+".privileges").getElementsByTagName("TR");for(var k=1;k<m.length;k++){var e=m[k];var l=e.getElementsByTagName("INPUT");var h=[];var g=e.getAttribute("id").split(".")[2];for(var f=0;f<l.length;f++){if(l[f].checked){h.push(l[f].name)}}if(h.length!=0){n.push({GROUP:g,OPERATIONS:h})}}return n};this.clearImportXslt=function(){$(c+".importxslt").options.length=0};this.addImportXslt=function(f,e){gui.addToSelect(c+".importxslt",f,e)};this.unselectImportXslt=function(){var f=$(c+".importxslt");for(var e=0;e<f.options.length;e++){f.options[e].selected=false}};this.clearCategories=function(){$(c+".categories").options.length=0};this.addCategory=function(f,e){gui.addToSelect(c+".categories",f,e)};this.getSelectedCategories=function(){var g=$(c+".categories");var e=[];for(var f=0;f<g.options.length;f++){if(g.options[f].selected){e.push({ID:g.options[f].value})}}return e};this.unselectCategories=function(){var f=$(c+".categories");for(var e=0;e<f.options.length;e++){f.options[e].selected=false}};this.selectCategories=function(f){var h=f.getElementsByTagName("categories");if(h.length==0){return}var g=h[0].getElementsByTagName("category");for(var e=0;e<g.length;e++){b(g[e])}};function b(e){var h=e.getAttribute("id");var g=$(c+".categories");for(var f=0;f<g.options.length;f++){if(g.options[f].value==h){g.options[f].selected=true;return}}}};