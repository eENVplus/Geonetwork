var hvutil=new Object();function getCheckedValue(a){var b=$$("input[type=radio][name="+a+"]").find(function(c){return c.checked});return(b)?$F(b):null}function setCheckedValue(a,c){var b=$$("input[type=radio][name="+a+"]");b.each(function(d){d.checked=false;if(d.value==c.toString()){d.checked=true}})}hvutil.setRadioOption=function(c,b,a){var d=hvutil.find(c,b);if(d==null){throw"Cannot find node with name : "+b}setCheckedValue(a,d)};hvutil.setOption=function(d,b,a){var f=hvutil.find(d,b);var e=$(a);var c=e.getAttribute("type");if(f==null){throw"Cannot find node with name : "+b}if(!e){throw"Cannot find control with id : "+a}if(c=="checkbox"){e.checked=(f=="true")}else{e.value=f}};hvutil.setOptionIfExists=function(d,b,a){var f=hvutil.find(d,b);var e=$(a);if(!e){return}var c=e.getAttribute("type");if(f==null){return}if(c=="checkbox"){e.checked=(f=="true")}else{e.value=f}};hvutil.find=function(b,a){var c=[b];while(c.length!=0){b=c.shift();if(b.nodeName==a){return xml.textContent(b)}b=b.firstChild;while(b!=null){if(b.nodeType==Node.ELEMENT_NODE){c.push(b)}b=b.nextSibling}}return null};function Every(a){if(typeof a=="string"){a=parseInt(a)}this.mins=a%60;a-=this.mins;this.hours=a/60%24;this.days=(a-this.hours*60)/1440}Every.build=function(c,a,b){if(typeof c=="string"){c=parseInt(c)}if(typeof a=="string"){a=parseInt(a)}if(typeof b=="string"){b=parseInt(b)}return c*1440+a*60+b};function Cron(a){this.days={mon:true,tue:true,wed:true,thu:true,fri:true,sat:true,sun:true};if(a==undefined){this.defaults()}else{var b=a.split(" ");if(b.length==1){this.parsePeriod(a)}else{this.parseCron(b)}}}Cron.prototype.defaults=function(){this.mins="0";this.hours="0";this.intervalHours=undefined};Cron.prototype.parsePeriod=function(a){var b=parseInt(a);this.defaults();if(isNaN(b)){}else{if(b<(60*2)){this.intervalHours="1"}else{if(b<(60*4.5)){this.intervalHours="3"}else{if(b<(60*9)){this.intervalHours="6"}else{if(b<(60*18)){this.intervalHours="12"}else{if(b<=(60*24)){this.intervalHours=undefined}else{if(Math.round(b/(60*24))>5){this.eachDay(function(e,d){e[d]=false});this.days.mon=true}else{var c=this.days;switch(Math.round(b/(60*24))){case 1:break;case 2:["tue","thu","sat"].each(function(e){c[e]=false});break;case 3:["tue","wed","fri","sat"].each(function(e){c[e]=false});break;case 4:["tue","wed","thu","sat","sun"].each(function(e){c[e]=false});break;case 5:["tue","wed","thu","fri","sun"].each(function(e){c[e]=false});break;default:throw new Exception(Math.round(b/(60*24))+" should not have made this else statement")}}}}}}}}};Cron.prototype.parseCron=function(b){var c=b[2].split("/");this.mins=b[1];this.hours=c[0];this.intervalHours=c[1];if(b[5]!="*"&&b[5]!="?"){this.eachDay(function(f,e){f[e]=false});var a=b[5].split(",");var d=this.days;a.each(function(e){d[e.toLowerCase()]=true})}};Cron.prototype.eachDay=function(a){a(this.days,"mon",this);a(this.days,"tue",this);a(this.days,"wed",this);a(this.days,"thu",this);a(this.days,"fri",this);a(this.days,"sat",this);a(this.days,"sun",this)};Cron.prototype.readUI=function(a){this.hours=$(a+".atHour").value;this.mins=$(a+".atMin").value;this.intervalHours=$(a+".atIntervalHours").value;this.eachDay(function(c,b){c[b]=$(a+"."+b.toUpperCase()).checked});return this};Cron.prototype.nodeAtSummary=function(){var b=""+this.mins;if(b.length==1){b="0"+b}var a=""+this.hours;if(a.length==1){a="0"+a}return(a+":"+b).replace("*","0")};Cron.prototype.nodeIntervalSummary=function(b){if(!b){b={MON:"MON",TUE:"TUE",WED:"WED",THU:"THU",FRI:"FRI",SAT:"SAT",SUN:"SUN"}}var a;if(this.intervalHours){a=this.intervalHours+" h"}else{if(this.hours==="*"){a="1 h"}}var c=this.dayString(b);if(c==="?"){c=b.MON+"-"+b.SUN}if(!a){return c}else{return a+" ("+c+")"}};Cron.prototype.setUI=function(b){$(b+".atHour").value=this.hours;$(b+".atMin").value=this.mins;$(b+".atIntervalHours").value=this.intervalHours;var a=this;$$("input.filesystem_day").each(function(e,c){var d=e.getAttribute("id").split(".")[1].toLowerCase();if(a.days[d]){e.checked=true}else{e.checked=false}});return this};Cron.prototype.dayString=function(b){var a=[];var c=true;this.eachDay(function(f,d){if(f[d]){var e=d.toUpperCase();if(b&&b[e]){e=b[e]}a.push(e)}else{c=false}});return c?"*":a.join(",")};Cron.prototype.asString=function(){var a=(this.intervalHours!="undefined")?this.hours+"/"+this.intervalHours:this.hours;return["0",this.mins,a,"?","*",this.dayString()].join(" ")};