function View(a){this.strLoader=a;this.validator=new Validator(a);this.dirty=false;this.lang="eng";this.validator.add([{id:"editor.destin",type:"length",minSize:1,maxSize:255}]);$("editor.source").style.background="#F0F0F0";Event.observe("lang.source","change",ker.wrap(this,this.langSrcChange));Event.observe("lang.destin","change",ker.wrap(this,this.langDesChange));Event.observe("editor.destin","keypress",ker.wrap(this,this.textChange))}View.prototype.init=function(){gui.setupTooltips(this.strLoader.getNode("tips"))};View.prototype.getEntityType=function(){return $F("entity.type")};View.prototype.getSelectedID=function(){return $F("entity.list")};View.prototype.getSelectedIndex=function(){return $("entity.list").selectedIndex};View.prototype.advanceOnList=function(){var b=$("entity.list");var a=b.selectedIndex+1;if(a>=b.options.length){a=-1}b.selectedIndex=a;return a};View.prototype.getTargetLanguage=function(){return $F("lang.destin")};View.prototype.getTargetText=function(){return $F("editor.destin")};View.prototype.clearEntityList=function(){$("entity.list").options.length=0;this.setEntity(null)};View.prototype.addEntityToList=function(a){var c=a.id;var b=a.name;if(b==null){b=a.label["en"]}gui.addToSelect("entity.list",c,b)};View.prototype.isDataValid=function(){return this.validator.validate()};View.prototype.getPrevLang=function(){return this.lang};View.prototype.updateTargetText=function(){this.currEntity.label[this.lang]=$("editor.destin").value;this.dirty=false};View.prototype.setEntity=function(c){this.dirty=false;this.currEntity=c;var b=$("editor.source");var d=$("editor.destin");d.style.background="#FFFFFF";if(c==null){b.value="";d.value="";d.readOnly=true}else{var a=$F("lang.source");var e=$F("lang.destin");b.value=c.label[a];d.value=c.label[e];d.readOnly=false}};View.prototype.langSrcChange=function(){if(this.currEntity==null){return}var a=$F("lang.source");$("editor.source").value=this.currEntity.label[a]};View.prototype.langDesChange=function(){if(this.currEntity==null){return}var b=$F("lang.destin");var a=$("editor.destin");a.value=this.currEntity.label[b];a.style.background="#FFFFFF"};View.prototype.textChange=function(){this.dirty=true;this.lang=this.getTargetLanguage();if(this.currEntity!=null){setTimeout(ker.wrap(this,this.colorUpdate),10)}};View.prototype.colorUpdate=function(){var c=$F("lang.destin");var a=this.currEntity.label[c];var b=$F("editor.destin");if(a==b){$("editor.destin").style.background="#FFFFFF"}else{$("editor.destin").style.background="#FFFFB0"}};